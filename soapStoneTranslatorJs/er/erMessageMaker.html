<html>

<head>
    <link rel="apple-touch-icon" sizes="57x57" href="../icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="144x144" href="../icon/android-icon-144x144.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../icon/favicon-16x16.png">
    <!-- <link rel="manifest" href="../icon/manifest.json"> idkkkkkkkkkkkkkkkkkkkkkkkkk -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <style type="text/css">
        @font-face {
            font-family: "GaramondPremierER";
            src: url("http://www.colourofloosemetal.com/DS/GaramondPremier.ttf") format("truetype");
        }

        body {
            font-family: "GaramondPremierER";
            font-size: 2.5em;
            background-color: black;
            color: palegoldenrod;
        }

        select {
            font-size: .5em;
        }

        button {
            font-size: .5em;
        }

        #footer {
            position: absolute;
            bottom: 0;
            width: 99%;
            height: 10vh;
            /* Height of the footer */
            background: black;
            text-align: center;
        }
        /* .center {
  margin: auto;
  width: 50%;
  padding: 10px;
} */
    </style>
    <script>
        //
        // THIS FILE IS AUTOMATICALLY GENERATED! DO NOT EDIT BY HAND!
        //base 64 jazz, use the url option to avoid forward slashes
        //
        ;
        (function (global, factory) {
            typeof exports === 'object' && typeof module !== 'undefined'
                ? module.exports = factory()
                : typeof define === 'function' && define.amd
                    ? define(factory) :
                    // cf. https://github.com/dankogai/js-base64/issues/119
                    (function () {
                        // existing version for noConflict()
                        var _Base64 = global.Base64;
                        var gBase64 = factory();
                        gBase64.noConflict = function () {
                            global.Base64 = _Base64;
                            return gBase64;
                        };
                        if (global.Meteor) { // Meteor.js
                            Base64 = gBase64;
                        }
                        global.Base64 = gBase64;
                    })();
        }((typeof self !== 'undefined' ? self
            : typeof window !== 'undefined' ? window
                : typeof global !== 'undefined' ? global
                    : this), function () {
                        'use strict';
                        /**
                         *  base64.ts
                         *
                         *  Licensed under the BSD 3-Clause License.
                         *    http://opensource.org/licenses/BSD-3-Clause
                         *
                         *  References:
                         *    http://en.wikipedia.org/wiki/Base64
                         *
                         * @author Dan Kogai (https://github.com/dankogai)
                         */
                        var version = '3.7.2';
                        /**
                         * @deprecated use lowercase `version`.
                         */
                        var VERSION = version;
                        var _hasatob = typeof atob === 'function';
                        var _hasbtoa = typeof btoa === 'function';
                        var _hasBuffer = typeof Buffer === 'function';
                        var _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;
                        var _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;
                        var b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
                        var b64chs = Array.prototype.slice.call(b64ch);
                        var b64tab = (function (a) {
                            var tab = {};
                            a.forEach(function (c, i) { return tab[c] = i; });
                            return tab;
                        })(b64chs);
                        var b64re = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;
                        var _fromCC = String.fromCharCode.bind(String);
                        var _U8Afrom = typeof Uint8Array.from === 'function'
                            ? Uint8Array.from.bind(Uint8Array)
                            : function (it, fn) {
                                if (fn === void 0) { fn = function (x) { return x; }; }
                                return new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));
                            };
                        var _mkUriSafe = function (src) {
                            return src
                                .replace(/=/g, '').replace(/[+\/]/g, function (m0) { return m0 == '+' ? '-' : '_'; });
                        };
                        var _tidyB64 = function (s) { return s.replace(/[^A-Za-z0-9\+\/]/g, ''); };
                        /**
                         * polyfill version of `btoa`
                         */
                        var btoaPolyfill = function (bin) {
                            // console.log('polyfilled');
                            var u32, c0, c1, c2, asc = '';
                            var pad = bin.length % 3;
                            for (var i = 0; i < bin.length;) {
                                if ((c0 = bin.charCodeAt(i++)) > 255 ||
                                    (c1 = bin.charCodeAt(i++)) > 255 ||
                                    (c2 = bin.charCodeAt(i++)) > 255)
                                    throw new TypeError('invalid character found');
                                u32 = (c0 << 16) | (c1 << 8) | c2;
                                asc += b64chs[u32 >> 18 & 63]
                                    + b64chs[u32 >> 12 & 63]
                                    + b64chs[u32 >> 6 & 63]
                                    + b64chs[u32 & 63];
                            }
                            return pad ? asc.slice(0, pad - 3) + "===".substring(pad) : asc;
                        };
                        /**
                         * does what `window.btoa` of web browsers do.
                         * @param {String} bin binary string
                         * @returns {string} Base64-encoded string
                         */
                        var _btoa = _hasbtoa ? function (bin) { return btoa(bin); }
                            : _hasBuffer ? function (bin) { return Buffer.from(bin, 'binary').toString('base64'); }
                                : btoaPolyfill;
                        var _fromUint8Array = _hasBuffer
                            ? function (u8a) { return Buffer.from(u8a).toString('base64'); }
                            : function (u8a) {
                                // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326
                                var maxargs = 0x1000;
                                var strs = [];
                                for (var i = 0, l = u8a.length; i < l; i += maxargs) {
                                    strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));
                                }
                                return _btoa(strs.join(''));
                            };
                        /**
                         * converts a Uint8Array to a Base64 string.
                         * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5
                         * @returns {string} Base64 string
                         */
                        var fromUint8Array = function (u8a, urlsafe) {
                            if (urlsafe === void 0) { urlsafe = false; }
                            return urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);
                        };
                        // This trick is found broken https://github.com/dankogai/js-base64/issues/130
                        // const utob = (src: string) => unescape(encodeURIComponent(src));
                        // reverting good old fationed regexp
                        var cb_utob = function (c) {
                            if (c.length < 2) {
                                var cc = c.charCodeAt(0);
                                return cc < 0x80 ? c
                                    : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))
                                        + _fromCC(0x80 | (cc & 0x3f)))
                                        : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))
                                            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))
                                            + _fromCC(0x80 | (cc & 0x3f)));
                            }
                            else {
                                var cc = 0x10000
                                    + (c.charCodeAt(0) - 0xD800) * 0x400
                                    + (c.charCodeAt(1) - 0xDC00);
                                return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))
                                    + _fromCC(0x80 | ((cc >>> 12) & 0x3f))
                                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))
                                    + _fromCC(0x80 | (cc & 0x3f)));
                            }
                        };
                        var re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;
                        /**
                         * @deprecated should have been internal use only.
                         * @param {string} src UTF-8 string
                         * @returns {string} UTF-16 string
                         */
                        var utob = function (u) { return u.replace(re_utob, cb_utob); };
                        //
                        var _encode = _hasBuffer
                            ? function (s) { return Buffer.from(s, 'utf8').toString('base64'); }
                            : _TE
                                ? function (s) { return _fromUint8Array(_TE.encode(s)); }
                                : function (s) { return _btoa(utob(s)); };
                        /**
                         * converts a UTF-8-encoded string to a Base64 string.
                         * @param {boolean} [urlsafe] if `true` make the result URL-safe
                         * @returns {string} Base64 string
                         */
                        var encode = function (src, urlsafe) {
                            if (urlsafe === void 0) { urlsafe = false; }
                            return urlsafe
                                ? _mkUriSafe(_encode(src))
                                : _encode(src);
                        };
                        /**
                         * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.
                         * @returns {string} Base64 string
                         */
                        var encodeURI = function (src) { return encode(src, true); };
                        // This trick is found broken https://github.com/dankogai/js-base64/issues/130
                        // const btou = (src: string) => decodeURIComponent(escape(src));
                        // reverting good old fationed regexp
                        var re_btou = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;
                        var cb_btou = function (cccc) {
                            switch (cccc.length) {
                                case 4:
                                    var cp = ((0x07 & cccc.charCodeAt(0)) << 18)
                                        | ((0x3f & cccc.charCodeAt(1)) << 12)
                                        | ((0x3f & cccc.charCodeAt(2)) << 6)
                                        | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;
                                    return (_fromCC((offset >>> 10) + 0xD800)
                                        + _fromCC((offset & 0x3FF) + 0xDC00));
                                case 3:
                                    return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)
                                        | ((0x3f & cccc.charCodeAt(1)) << 6)
                                        | (0x3f & cccc.charCodeAt(2)));
                                default:
                                    return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)
                                        | (0x3f & cccc.charCodeAt(1)));
                            }
                        };
                        /**
                         * @deprecated should have been internal use only.
                         * @param {string} src UTF-16 string
                         * @returns {string} UTF-8 string
                         */
                        var btou = function (b) { return b.replace(re_btou, cb_btou); };
                        /**
                         * polyfill version of `atob`
                         */
                        var atobPolyfill = function (asc) {
                            // console.log('polyfilled');
                            asc = asc.replace(/\s+/g, '');
                            if (!b64re.test(asc))
                                throw new TypeError('malformed base64.');
                            asc += '=='.slice(2 - (asc.length & 3));
                            var u24, bin = '', r1, r2;
                            for (var i = 0; i < asc.length;) {
                                u24 = b64tab[asc.charAt(i++)] << 18
                                    | b64tab[asc.charAt(i++)] << 12
                                    | (r1 = b64tab[asc.charAt(i++)]) << 6
                                    | (r2 = b64tab[asc.charAt(i++)]);
                                bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)
                                    : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)
                                        : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);
                            }
                            return bin;
                        };
                        /**
                         * does what `window.atob` of web browsers do.
                         * @param {String} asc Base64-encoded string
                         * @returns {string} binary string
                         */
                        var _atob = _hasatob ? function (asc) { return atob(_tidyB64(asc)); }
                            : _hasBuffer ? function (asc) { return Buffer.from(asc, 'base64').toString('binary'); }
                                : atobPolyfill;
                        //
                        var _toUint8Array = _hasBuffer
                            ? function (a) { return _U8Afrom(Buffer.from(a, 'base64')); }
                            : function (a) { return _U8Afrom(_atob(a), function (c) { return c.charCodeAt(0); }); };
                        /**
                         * converts a Base64 string to a Uint8Array.
                         */
                        var toUint8Array = function (a) { return _toUint8Array(_unURI(a)); };
                        //
                        var _decode = _hasBuffer
                            ? function (a) { return Buffer.from(a, 'base64').toString('utf8'); }
                            : _TD
                                ? function (a) { return _TD.decode(_toUint8Array(a)); }
                                : function (a) { return btou(_atob(a)); };
                        var _unURI = function (a) { return _tidyB64(a.replace(/[-_]/g, function (m0) { return m0 == '-' ? '+' : '/'; })); };
                        /**
                         * converts a Base64 string to a UTF-8 string.
                         * @param {String} src Base64 string.  Both normal and URL-safe are supported
                         * @returns {string} UTF-8 string
                         */
                        var decode = function (src) { return _decode(_unURI(src)); };
                        /**
                         * check if a value is a valid Base64 string
                         * @param {String} src a value to check
                          */
                        var isValid = function (src) {
                            if (typeof src !== 'string')
                                return false;
                            var s = src.replace(/\s+/g, '').replace(/={0,2}$/, '');
                            return !/[^\s0-9a-zA-Z\+/]/.test(s) || !/[^\s0-9a-zA-Z\-_]/.test(s);
                        };
                        //
                        var _noEnum = function (v) {
                            return {
                                value: v, enumerable: false, writable: true, configurable: true
                            };
                        };
                        /**
                         * extend String.prototype with relevant methods
                         */
                        var extendString = function () {
                            var _add = function (name, body) { return Object.defineProperty(String.prototype, name, _noEnum(body)); };
                            _add('fromBase64', function () { return decode(this); });
                            _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });
                            _add('toBase64URI', function () { return encode(this, true); });
                            _add('toBase64URL', function () { return encode(this, true); });
                            _add('toUint8Array', function () { return toUint8Array(this); });
                        };
                        /**
                         * extend Uint8Array.prototype with relevant methods
                         */
                        var extendUint8Array = function () {
                            var _add = function (name, body) { return Object.defineProperty(Uint8Array.prototype, name, _noEnum(body)); };
                            _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });
                            _add('toBase64URI', function () { return fromUint8Array(this, true); });
                            _add('toBase64URL', function () { return fromUint8Array(this, true); });
                        };
                        /**
                         * extend Builtin prototypes with relevant methods
                         */
                        var extendBuiltins = function () {
                            extendString();
                            extendUint8Array();
                        };
                        var gBase64 = {
                            version: version,
                            VERSION: VERSION,
                            atob: _atob,
                            atobPolyfill: atobPolyfill,
                            btoa: _btoa,
                            btoaPolyfill: btoaPolyfill,
                            fromBase64: decode,
                            toBase64: encode,
                            encode: encode,
                            encodeURI: encodeURI,
                            encodeURL: encodeURI,
                            utob: utob,
                            btou: btou,
                            decode: decode,
                            isValid: isValid,
                            fromUint8Array: fromUint8Array,
                            toUint8Array: toUint8Array,
                            extendString: extendString,
                            extendUint8Array: extendUint8Array,
                            extendBuiltins: extendBuiltins
                        };
                        //
                        // export Base64 to the namespace
                        //
                        // ES5 is yet to have Object.assign() that may make transpilers unhappy.
                        // gBase64.Base64 = Object.assign({}, gBase64);
                        gBase64.Base64 = {};
                        Object.keys(gBase64).forEach(function (k) { return gBase64.Base64[k] = gBase64[k]; });
                        return gBase64;
                    }));
    </script>
</head>

<body>
    <!-- <p>page title: <input type="text" id="title" value=""></p>
            <p>message 1: <input type="text" id="msg1" value=""></p>
            <p>message 2: <input type="text" id="msg2" value=""></p>
            <p>message 3: <input type="text" id="msg3" value=""></p>
            <p>rainbow message: <input type="text" id="rbmsg" value=""></p>
            <p>blink message: <input type="text" id="bmsg" value=""></p>
            <button onclick="process()">Generate</button> -->

    <label for="messageType" style="font-size: 140%;">Message Type</label>
    <select name="messageType" id="messageType" onchange="message_type_change(this)">
        <option value="fromTemplates">From game templates</option>
        <option value="custom">custom (sacrilegious)</option>
    </select>
    <br>
    <br>

    <div id="customMsgUi" style="display : none;">
        <label for="customText">Enter Custom Text:</label>

        <textarea id="customText" name="customText"></textarea><br>
        <p>
            use "&lt;br&gt;" for new line, or just hit enter <br> Can handle up to around 50k characters (about the
            length of the bee movie script) and then it breaks
        </p>
    </div>



    <div id="templateMsgUi">
        <label for="wso" style="font-size: 120%;">Word Selection Options</label>
        <select name="wso" id="wso" onchange="wsoChange(this)">
            <option value="Category and words">Category and words</option>
            <option value="All words alphabetical">All words alphabetical</option>
        </select>
        <br>
        <br>
        <label for="template">select a template</label>
        <select name="template" id="template1">
            <option value=""></option>
        </select>
        <br>
        <div class="awa" style="display:none;">
            <label for="allWords">word</label>
            <select name="allWords" id="allWords1">
                <option value=""></option>
            </select>
        </div>
        <div class="c&w">
            <label for="category">category</label>
            <select name="category" id="category1" onchange="categoryChange(this)">
                <option value=""></option>
            </select>
            <br>
            <label for="word">word</label>
            <select name="word" id="word1">
                <option value=""></option>
            </select>
        </div>
        <br>
        <label for="conjunction">conjunction</label>
        <select name="conjunction" id="conjunction" onchange="conjunction_change(this)">
            <option value=""></option>
        </select>
        <br>
        <br>
        <label for="template">select a template</label>
        <select name="template" id="template2" disabled>
            <option value=""></option>
        </select>
        <br>
        <div class="awa" style="display:none;">
            <label for="allWords">word</label>
            <select name="allWords" id="allWords2" disabled>
                <option value=""></option>
            </select>
        </div>
        <div class="c&w">
            <label for="category">category</label>
            <select name="category" id="category2" onchange="categoryChange(this)" disabled>
                <option value=""></option>
            </select>
            <br>
            <label for="word">word</label>
            <select name="word" id="word2" disabled>
                <option value=""></option>
            </select>
        </div>
        <br>
    </div>
    <button id="getLink" onclick="make_link()">Generate message image</button>

</body>
<div id="footer">
    <div class="center">
    <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
    <script
        type='text/javascript'>kofiwidget2.init('Support Me on Ko-fi', '#fba8ff', 'Z8Z57TVXQ'); kofiwidget2.draw();</script>
    </div>
    <p style="font-size: .35em">If you would like to help, all my creations are fueled by coffee, thank you (✿◠‿◠)</p>
</div>
<script>

    // next few sections are mostly getting the selector element and filling it with the appropriate options

    function selectElement(id, valueToSelect) {
        let element = document.getElementById(id);
        element.value = valueToSelect;
    }

    var templates = [
        '**** ahead', 'Likely ****', 'If only I had a ****...', '****, O ****', 'Ahh, ****...', 'No **** ahead', 'First off, ****', 'Didn\'t expect ****...', 'Behold, ****!', '****', '**** required ahead', 'Seek ****', 'Visions of ****...', 'Offer ****', '****!', 'Be wary of ****', 'Still no ****...', 'Could this be a ****?', 'Praise the ****', '****?', 'Try ****', 'Why is it always ****?', 'Time for ****', 'Let there be ****', '****...'
    ];
    var wordCategoriesDict = { "enemies": ["enemy", "weak foe", "strong foe", "monster", "dragon", "boss", "sentry", "group", "pack", "decoy", "undead", "soldier", "knight", "cavalier", "archer", "sniper", "mage", "ordnance", "monarch", "lord", "demi-human", "outsider", "giant", "horse", "dog", "wolf", "rat", "beast", "bird", "raptor", "snake", "crab", "prawn", "octopus", "bug", "scarab", "slug", "wraith", "skeleton", "monstrosity", "ill-omened creature"], "people": ["Tarnished", "warrior", "swordfighter", "knight", "samurai", "sorcerer", "cleric", "sage", "merchant", "teacher", "master", "friend", "lover", "old dear", "old codger", "angel", "fat coinpurse", "pauper", "good sort", "wicked sort", "plump sort", "skinny sort", "lovable sort", "pathetic sort", "strange sort", "numble sort", "laggardly sort", "invisible sort", "unfathomable sort", "giant sort", "sinner", "thief", "liar", "dastard", "traitor", "pair", "trio", "noble", "aristocrat", "hero", "champion", "monarch", "lord", "god"], "things": ["item", "necessary item", "precious item", "something", "something incredible", "treasure chest", "corpse", "coffin", "trap", "armament", "shield", "bow", "projectile weapon", "armor", "talisman", "skill", "sorcery", "incantation", "mao", "material", "flower", "grass", "tree", "fruit", "seed", "mushroom", "tear", "crystal", "butterfly", "bug", "dung", "grace", "door", "key", "ladder", "lever", "lift", "spiritspring", "sending gate", "stone astrolabe", "Birdseye Telescope", "message", "bloodstain", "Erdtree", "Elden Ring"], "battleTactics": ["close-quarters battle", "ranged battle", "horseback battle", "luring out", "defeating one-by-one", "taking on all at once", "rushing in", "stealth", "mimicry", "confusion", "pursuit", "fleeing", "summoning", "circling around", "jumping off", "dashing through", "brief respite"], "actions": ["attacking", "jump attack", "running attack", "critical hit", "two-handing", "blocking", "parrying", "guard counter", "sorcery", "incantation", "skill", "summoning", "throwing", "healing", "running", "rolling", "backstepping", "jumping", "crouching", "target lock", "item crafting", "gesturing"], "situations": ["morning", "noon", "evening", "night", "clear sky", "overcast", "rain", "storm", "mist", "snow", "patrolling", "procession", "crowd", "surprise attack", "ambush", "pincer attack", "beating to a pulp", "battle", "reinforcements", "ritual", "explosion", "high spot", "defensible spot", "climbable spot", "bright spot", "dark spot", "open area", "cramped area", "hiding place", "sniping spot", "recon spot", "safety", "danger", "gorgeous view", "detour", "hidden path", "secret passage", "shortcut", "dead end", "looking away", "unnoticed", "out of stamina"], "places": ["high road", "checkpoint", "bridge", "castle", "fort", "city", "ruins", "church", "tower", "camp site", "house", "cemetery", "underground tomb", "tunnel", "cave", "evergaol", "great tree", "cellar", "surface", "underground", "forest", "river", "lake", "bog", "mountain", "valley", "cliff", "waterside", "nest", "hole"], "directions": ["east", "west", "south", "north", "ahead", "behind", "left", "right", "center", "up", "down", "edge"], "bodyParts": ["head", "stomach", "back", "arms", "legs", "rump", "tail", "core", "fingers"], "affinities": ["physical", "standard", "striking", "slashing", "piercing", "fire", "lightning", "magic", "holy", "poison", "toxic", "scarlet rot", "blood loss", "frost", "sleep", "madness", "death"], "concepts": ["life", "Death", "light", "dark", "stars", "fire", "Order", "chaos", "joy", "wrath", "suffering", "sadness", "comfort", "bliss", "misfortune", "good fortune", "bad luck", "hope", "despair", "victory", "defeat", "research", "faith", "abundance", "rot", "loyalty", "injustice", "secret", "opportunity", "pickle", "clue", "friendship", "love", "bravery", "vigor", "fortitude", "confidence", "distracted", "unguarded", "introspection", "regret", "resignation", "futility", "on the brink", "betrayal", "revenge", "destruction", "recklessness", "calmness", "vigilance", "tranquility", "sound", "tears", "sleep", "depths", "dregs", "fear", "sacrifice", "ruin"], "phrases": ["good luck", "look carefully", "listen carefully", "think carefully", "well done", "I did it!", "I've failed...", "here!", "not here!", "don't you dare!", "do it!", "I can't take this...", "don't think", "so lonely...", "here again...", "just getting started", "stay calm", "keep moving", "turn back", "give up", "don't give up", "help me...", "I don't believe it...", "too high up", "I want to go home...", "it's like a dream...", "seems familiar...", "beautiful...", "you don't have the right", "are you ready?"] };
    var conjunctions = [
        'and then ', 'or ', 'but ', 'therefore ', 'in short ', 'except ', 'by the way ', 'so to speak ', 'all the more ', ', '
    ];

    window.addEventListener("load", function () {
        document.getElementById("messageType").style.fontSize = ".9em"
        document.getElementById("wso").style.fontSize = ".7em"
        //scale up stuff if on mobile
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.body.style.fontSize = "4em";
            document.getElementById("footer").fontSize = ".7em";
            selectorList = document.body.getElementsByTagName('select');
            for (let i = 0; i <= selectorList.length - 1; i++) {
                selectorList[i].style.fontSize = ".7em";
            }
            buttonList = document.body.getElementsByTagName('button');
            for (let i = 0; i <= buttonList.length - 1; i++) {
                buttonList[i].style.fontSize = "1em";

            }
            document.getElementById("messageType").style.fontSize = "1em"
            document.getElementById("wso").style.fontSize = ".85em"
            document.getElementById("customText").style.fontSize = "1em";
        }

        // console.log("loaded page")
        // fill_options()
    });
    var select1 = document.getElementById("template1");
    var select2 = document.getElementById("template2");
    //clear to remove the empty option at the top // bro the empty option is literally there beacuse i put it in the html ffs
    removeAll(select1);
    removeAll(select2);
    for (var i = 0; i < templates.length; i++) {
        var opt = templates[i];
        var el = document.createElement("option");
        el.textContent = opt;
        el.value = opt;
        var el2 = document.createElement("option");
        el2.textContent = opt;
        el2.value = opt;
        select1.appendChild(el);
        select2.appendChild(el2);
    }
    var category1 = document.getElementById("category1");
    var category2 = document.getElementById("category2");
    removeAll(category1);
    removeAll(category2);
    //for the categories we fill with the dict values
    for (const [key, value] of Object.entries(wordCategoriesDict)) {
        // console.log(key);
        var opt = key;
        var el = document.createElement("option");
        el.textContent = opt;
        el.value = opt;
        var el2 = document.createElement("option");
        el2.textContent = opt;
        el2.value = opt;
        category1.appendChild(el);
        category2.appendChild(el2);
    }
    //fill the all words alphabetical selector
    allWordsSorted = [];
    for (const [key, value] of Object.entries(wordCategoriesDict)) {
        allWordsSorted = allWordsSorted.concat(value);
    }
    //gotta do this since normal sort is weirdly case sensitive
    allWordsSorted = allWordsSorted.sort((a, b) => {
        return a.localeCompare(b, undefined, { sensitivity: 'base' });
    });
    //fill all words alphabetical selector
    var allWords1 = document.getElementById("allWords1");
    var allWords2 = document.getElementById("allWords2");
    for (var i = 0; i < allWordsSorted.length; i++) {
        var el = document.createElement("option");
        el.textContent = allWordsSorted[i];
        el.value = allWordsSorted[i];
        var el2 = document.createElement("option");
        el2.textContent = allWordsSorted[i];
        el2.value = allWordsSorted[i];
        allWords1.appendChild(el);
        allWords2.appendChild(el2);
    }
    selectElement('category1', 'things')
    selectElement('template1', 'Behold, ****!')
    selectElement('category2', 'concepts')
    selectElement('template2', 'Try ****')
    categoryChange(category1)
    categoryChange(category2)
    selectElement('word1', 'flower')
    selectElement('word2', 'hope')
    //conjunction we dont clear so that there is the option to have no conjunction and no 2nd sentence
    var conjunctionSelector = document.getElementById("conjunction");
    //for the categories we fill with the dict values
    for (var i = 0; i < conjunctions.length; i++) {
        // console.log(key);
        var opt = conjunctions[i];
        var el = document.createElement("option");
        el.textContent = opt;
        el.value = opt;
        conjunctionSelector.appendChild(el);
    }

    //to clear the words when category is changed
    function removeAll(selectBox) {
        while (selectBox.options.length > 0) {
            selectBox.remove(0);
        }
    }
    function message_type_change(msgTypeEl) {
        console.log(msgTypeEl.value);
        console.log(msgTypeEl.id);
        if (msgTypeEl.value == "fromTemplates") {
            document.getElementById("customMsgUi").style.display = "none";
            document.getElementById("templateMsgUi").style.display = "block";
        }
        else if (msgTypeEl.value == "custom") {
            document.getElementById("customMsgUi").style.display = "block";
            document.getElementById("templateMsgUi").style.display = "none";
        }

    }
    function wsoChange(wordSelectOption) {
        console.log(wordSelectOption.value);
        console.log(wordSelectOption.id);
        if (wordSelectOption.value == "Category and words") {
            candw = document.getElementsByClassName('c&w');
            awa = document.getElementsByClassName('awa');
            for (var i = 0; i < candw.length; i++) {
                candw[i].style.display = 'block';
            }
            for (var i = 0; i < awa.length; i++) {
                awa[i].style.display = 'none';
            }
        }
        else if (wordSelectOption.value == "All words alphabetical") {
            candw = document.getElementsByClassName('c&w');
            awa = document.getElementsByClassName('awa');
            for (var i = 0; i < candw.length; i++) {
                candw[i].style.display = 'none';
            }
            for (var i = 0; i < awa.length; i++) {
                awa[i].style.display = 'block';
            }
        }

    }
    //when a category is changes
    function categoryChange(category) {
        //get the value and id
        console.log(category.value);
        //id will be category 1 or 2
        console.log(category.id);
        //get the last char "1" or "2"
        firstOr2nd = category.id.charAt(category.id.length - 1)
        //to be able to select the word1 or 2 selector
        wordEl = document.getElementById("word" + firstOr2nd);
        //clear its options
        removeAll(wordEl);
        //populate it with the words from the dict using the category value
        for (var i = 0; i < wordCategoriesDict[category.value].length; i++) {
            var opt = wordCategoriesDict[category.value][i];
            var el = document.createElement("option");
            el.textContent = opt;
            el.value = opt;
            wordEl.appendChild(el);
        }
    }
    function conjunction_change(conj) {
        console.log(conj.value);
        if (conj.value == '') {
            document.getElementById('template2').disabled = true;
            document.getElementById('category2').disabled = true;
            document.getElementById('word2').disabled = true;
            document.getElementById('allWords2').disabled = true;
            // document.getElementById("2ndPhrase").style.display = "none";
        }
        else {
            // document.getElementById("2ndPhrase").style.display = "block";
            document.getElementById('template2').disabled = false;
            document.getElementById('category2').disabled = false;
            document.getElementById('word2').disabled = false;
            document.getElementById('allWords2').disabled = false;
        }
    }


    function make_link() {
        url = "../erMessageGen/";
        messageType = document.getElementById('messageType').value;
        if (messageType == "fromTemplates") {
            wordSelectOption = document.getElementById("wso").value;
            template1 = document.getElementById("template1").value;
            template2 = document.getElementById("template2").value;
            if (wordSelectOption == "Category and words") {
                word1 = document.getElementById('word1').value;
                word2 = document.getElementById('word2').value;
            }
            else if (wordSelectOption == "All words alphabetical") {
                word1 = document.getElementById('allWords1').value;
                word2 = document.getElementById('allWords2').value;
            }


            template1Index = String(templates.indexOf(template1));
            template1Index = template1Index.padStart(2, "0");
            word1Index = String(allWordsSorted.indexOf(word1));
            word1Index = word1Index.padStart(3, "0");
            
            msg1 = template1Index+word1Index;

            conjunction = document.getElementById('conjunction').value;
            if (conjunction != "") {
                conjunctionIndex = String(conjunctions.indexOf(conjunction));
                conjunctionIndex = conjunctionIndex.padStart(2, "0");
                template2Index = String(templates.indexOf(template2));
                template2Index = template2Index.padStart(2, "0");
                word2Index = String(allWordsSorted.indexOf(word2));
                word2Index = word2Index.padStart(3, "0");
            
            msg2 = conjunctionIndex+template2Index+word2Index;
            }
            else {
                msg2 = ""
            }
            console.log(msg1);
            console.log(msg2);
            if (msg1 == "") {
                url += "1"
            }
            else {
                url += Base64.encodeURL(msg1);
            }
            url += "/"
            if (msg2 == "") {
                url += "1"
            }
            else {
                url += Base64.encodeURL(msg2);
            }
            url += "/"
            url += Base64.encodeURL("fromTemplates");
            console.log(url);
            // window.location.href = url;

        }
        else if (messageType == "custom") {
            msg1 = document.getElementById('customText').value;
            if (msg1 == "") {
                url += "1"
            }
            else {
                msg1 = msg1.replace(/[\r\n]/gm, '<br>');
                url += Base64.encodeURL(msg1);
            }
            url += "/";
            url += "1";//msg 2
            url += "/";
            url += Base64.encodeURL("custom");
            console.log(url);
        }

        // window.location.href = url;
        console.log(url);
        window.open(url, 'mywindow').focus();

        // if(msg1 == ""){
        //     url += "1"
        // }
        // else{
        //     url += Base64.encodeURL(msg1);
        // }
        // url += "/"
        // if(msg2 == ""){
        //     url += "1"
        // }
        // else{
        //     url += Base64.encodeURL(msg2);
        // }
        // url += "/"
        // if(msg3 == ""){
        //     url += "1"
        // }
        // else{
        //     url += Base64.encodeURL(msg3);
        // }
        // console.log(url);

    }
</script>

</html>