<!DOCTYPE HTML>
<html>
    <head>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script>
</head>


<script>

//list of sentences the query will be compared to
sentences = ["example sentences", "enemy ahead", "weak foe ahead", "strong foe ahead",];

//save list as json
function exportToJsonFile(jsonData) {
    let dataStr = JSON.stringify(jsonData);
    let dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

    let exportFileDefaultName = 'data.json';

    let linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
}


//load tf model and generate sentence tensors
function generate_tensors(textList){
(async() => {
const model = await use.load();
tensors = []
console.log((await model.embed(textList[1])).unstack()[0].arraySync())
for(i = 0; i < textList.length; i+= 1){
    tensors.push((await model.embed(textList[i])).unstack()[0].arraySync())
    //to view progress in the console
    if(i %100 == 0){
        console.log(i);
    }
}
exportToJsonFile(tensors);

})()  }

generate_tensors(sentences);


</script>
</html>